<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ููุธููู โ ุงูููุงุฏ</title>
  <link rel="stylesheet" href="style.css"/>
  <!-- ุฑุจุท ููู manifest -->
  <link rel="manifest" href="manifest.json">
  <!-- ููู ุงูุดุฑูุท ุงูุนููู ูู ุงูููุงุชู -->
  <meta name="theme-color" content="#5b2dd6"/>
</head>
<body>
  <header class="app-bar">
    <h1>ููุธููู <span class="logo">๐</span></h1>
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ูุงุฏุฉ..." />
      <button id="clearSearch" style="display:none">โ</button>
    </div>
    <div class="header-actions">
      <button id="exportBtn" title="ูุณุฎ ุงุญุชูุงุทู">๐ฅ</button>
      <button id="importBtn" title="ุงุณุชุนุงุฏุฉ">๐ค</button>
      <input type="file" id="importInput" accept=".json" style="display:none"/>
    </div>
  </header>

  <!-- ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ -->
  <main id="home" class="screen active">
    <section class="subjects" id="subjectsGrid"></section>
    <button id="addSubjectBtn" class="fab fab-main">โ ุฅุถุงูุฉ ูุงุฏุฉ</button>
  </main>

  <!-- ุดุงุดุฉ ุงููุงุฏุฉ -->
  <main id="subject" class="screen">
    <div class="subject-header">
      <button id="backBtn" class="back" title="ุฑุฌูุน">โฉ</button>
      <div class="subject-title">
        <span id="subjectIcon" class="subject-emoji">๐</span>
        <h2 id="subjectName">โ</h2>
        <span id="subjectMood" class="mood">๐</span>
      </div>
      <button id="editSubjectBtn" class="edit-btn" title="ุชุนุฏูู ุงููุงุฏุฉ">โ๏ธ</button>
    </div>

    <div class="tabs">
      <button class="tab active" data-tab="notes">๐ ููุงุญุธุงุช</button>
      <button class="tab" data-tab="files">๐ ูููุงุช</button>
      <button class="tab" data-tab="images">๐ผ๏ธ ุตูุฑ</button>
      <button class="tab" data-tab="audio">๐ต ุตูุชูุงุช</button>
    </div>

    <!-- Notes -->
    <section class="tab-body active" id="tab-notes" data-scope="notes">
      <div class="empty" data-empty="notes">ูุง ุชูุฌุฏ ููุงุญุธุงุช</div>
      <ul id="notesList" class="list"></ul>
      <button class="fab fab-notes" data-add="note" title="ุฅุถุงูุฉ ููุงุญุธุฉ">โ</button>
    </section>

    <!-- Files -->
    <section class="tab-body" id="tab-files" data-scope="files">
      <div class="empty" data-empty="files">ูุง ุชูุฌุฏ ูููุงุช</div>
      <div id="filesList" class="files-grid"></div>
      <button class="fab fab-files" data-add="file" title="ุฅุถุงูุฉ ููู">โ</button>
    </section>

    <!-- Images -->
    <section class="tab-body" id="tab-images" data-scope="images">
      <div class="empty" data-empty="images">ูุง ุชูุฌุฏ ุตูุฑ</div>
      <div id="imagesList" class="images-grid"></div>
      <button class="fab fab-images" data-add="image" title="ุฅุถุงูุฉ ุตูุฑุฉ">โ</button>
    </section>

    <!-- Audio -->
    <section class="tab-body" id="tab-audio" data-scope="audio">
      <div class="empty" data-empty="audio">ูุง ุชูุฌุฏ ุตูุชูุงุช</div>
      <div id="audioList" class="audio-grid"></div>
      <button class="fab fab-audio" data-add="audio" title="ุฅุถุงูุฉ ุตูุชูุฉ">โ</button>
    </section>

    <div id="trashBar" class="trash-bar">
      <span id="selectedCount">0 ุนูุตุฑ ูุญุฏุฏ</span>
      <button id="trashBtn" class="trash">๐๏ธ</button>
      <button id="cancelSelect" class="cancel">ุฅูุบุงุก</button>
    </div>
  </main>

  <!-- Modal ูุนุฑุถ ุงูุตูุฑุฉ ุจุงูุญุฌู ุงููุงูู -->
  <div id="imageModal" class="modal">
    <img id="modalImage" src="" alt="full"/>
  </div>

  <!-- (ุงูุญูุงุฑุงุช ุงูุฃุฎุฑู ูุซู subjectDialog, noteDialog ... ุงูุฎ ุชุธู ููุง ูู ุงููุณุฎุฉ ุงูุฃุตููุฉ) -->

  <script src="app.js"></script>

  <!-- ุชุณุฌูู Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js")
          .then(reg => console.log("Service Worker ูุณุฌู:", reg.scope))
          .catch(err => console.error("ูุดู ุชุณุฌูู Service Worker:", err));
      });
    }
  </script>
</body>
</html>
